<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        crossorigin="anonymous">
        <script src="https://kit.fontawesome.com/d8a93e8eec.js" crossorigin="anonymous"></script>
</head>

<body background="img/img2.jpg">
    <div class="container">
            <div align="center">
            <img src="img/img.jpg">
            </div>
            </div>
</div>
<body>
    <div class="container" id="visible">
        <div class="container" id="todo">
            <div class="row">
                <button type="button" class="btn btn-block btn-primary"></button>
            </div>
            <div class="row">
                <button type="button" class="btn btn-block btn-secundary disabled">
                    <i class="fas fa-flag"></i>
                    Test Verbos Irregulares
                    <i class="fas fa-flag"></i>
                </button>
            </div>
            <br>
            <div class="row">
                <div class="col-4"></div>
                <div class="col-4">
                    <button type="button" class="btn btn-block btn-primary">Cambiar Partida</button>
                </div>
                <div class="col-4"></div>
            </div>
            <br>
            <div class="row">
                <button type="button" class="btn btn-block btn-secundary disabled">
                    Elige el numero de verbos
                </button>
            </div>
            <br>
            <div class="row">
                <div class="col-1"></div>
                <div class="col-2">
                    <a id="valor10" class="btn btn-block btn-primary" role="button"
                        onclick="dameNumeroDeVerbos('10');">10</a>
                </div>
                <div class="col-2">
                    <a id="valor20" class="btn btn-block btn-primary" role="button"
                        onclick="dameNumeroDeVerbos('20');">20</a>
                </div>
                <div class="col-2">
                    <a id="valor30" class="btn btn-block btn-primary" role="button"
                        onclick="dameNumeroDeVerbos('30');">30</a>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('40');">40</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('50');">50</button>
                </div>
                <div class="col-1"></div>
            </div>
            <br>
            <div class="row">
                <div class="col-2"></div>
                <div class="col-2">
                    <button id="valor" type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('60');">60</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('70');">70</button>
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('90');">90</button>
                </div>
                <div class="col-2">
                    <button id="valor140" type="button" class="btn btn-block btn-primary"
                        onclick="dameNumeroDeVerbos('140');">140</button>
                </div>
                <div class="col-2"></div>

            </div>

        </div>
    </div>
    <div class="container" id="oculto">
        <div class="row">
            <button id="miNivel" type="button" class="btn btn-block btn-primary disabled"></button>
        </div>
        <div class="row">
            <button type="button" class="btn btn-block btn-secundary disabled">
                <i class="fas fa-flag"></i>
                Test Verbos Irregulares
                <i class="fas fa-flag"></i>
            </button>
        </div>
        <div class="row">
            <button type="button" class="btn btn-block btn-primary disabled"></button>
        </div>
        <div class="row">
            <button type="button" id="marcador" class="btn btn-block btn-primary disabled">0</button>
        </div>

        <div class="progress">
            <div id="barraProgreso" class="progress-bar bg-warning" role="progressbar" style="width: 0%;"
                aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div class="row">
            <button type="button" class="btn btn-block btn-primary">
                <span id="adondevanlosiconos">

                </span>
            </button>
        </div>
        <div class="row">
            <button type="button" class="btn btn-block btn-secundary disabled" id="spanishVerb"></button>
        </div>
        <br>
        <div class="row">
            <div class="col">
                <div id="primeraForma"></div>
            </div>
            <div class="col">
                <div id="segundaForma"></div>
            </div>
            <div class="col">
                <div id="terceraForma"></div>

            </div>
        </div>
        <br>
        <div class="row">
            <button id="botonComprobar" type="button" class="btn btn-block btn-primary"
                onclick="chequeaRespuesta(columna),guardarGalletica(_nivelGalletica, marcadorGalletica)">Comprobar</button>
        </div>
        <br>
        <div class="row">
            <div class="col-4"></div>
            <div class="col-4">
                <button type="button" class="btn btn-block btn-primary" onclick="cambiaNivel()">Cambia de nivel</button>
            </div>
            <div class="col-4">

            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="js/listaVerbos.js"></script>
    <script>
        //Variables del proyecto:
        var nivel;
        var _nivel = "";
        var columna = "";
        var _coumna = "";
        var jugando = 0;
        var marcador = 0;
        var iconos = ""
        var cuadradoicono = "";
        width = 0;
        var id = 0;
        style = "";
        var alternativa = "";
        var auxiliar = [];
        var chequeDobleVerbo = 0;
        var _nivelGalletica = "nivel" + nivel;
        var marcadorGalletica;
        let arrayAuxiliar = [["was", "were"],
        ["learnt", "learnd"]
        ];

        document.getElementById("oculto").style.display = "none";
        //se encarga de correcto funcionamiento de los demas metodos
        function dameNumeroDeVerbos(_nivel) {
            
            nivel = _nivel;
            leerGalletica(nivel);
            document.getElementById("visible").style.display = "none";
            document.getElementById("oculto").style.display = "inherit";
            eligeYDameIcono(nivel);
            dameNivel(nivel);
            eligeVerbo();
            chequeaRespuesta(columna);
            _nivelGalletica = "nivel" + nivel;
      
        }
        function dameNivel(nivel) {
            document.getElementById('miNivel').innerHTML = 'Nivel: ' + nivel;
        }
        
        //elijo icono en funcion del nivel seleccionado
        function eligeYDameIcono(_nivel) {
            if (nivel => 10 && nivel <= 30) {

                for (var i = 0; i < 15; i++) {
                    iconos = iconos + '<i class="fab fa-accessible-icon" id="' + i + '" style=""></i>';
                    document.getElementById('adondevanlosiconos').innerHTML = iconos;
                }

            }
            if (nivel > 20 && nivel <= 50) {
                iconos = "";
                for (var i = 0; i < 15; i++) {

                    iconos = iconos + '<i class="far fa-star" id="' + i + '" style=""></i>';
                    document.getElementById('adondevanlosiconos').innerHTML = iconos;
                }
            }
            if (nivel > 50 && nivel <= 140) {
                iconos = "";

                for (var i = 0; i < 15; i++) {
                    iconos = iconos + '<i class="fas fa-ambulance" id="' + i + '" style=""></i>';
                    document.getElementById('adondevanlosiconos').innerHTML = iconos;
                }
            }
        }
        //si me he equivocado cambio el color de todos los iconos a blanco
        function borraColorIconos(auxiliar) {
            for (auxiliar = id + 1; auxiliar >= 0; auxiliar--) {
                document.getElementById(auxiliar).style.color = 'white';
            }
            id = 0;
        }
        //chequea respuesta
        function chequeaRespuesta(columna) {

            if (jugando == 0) {
                jugando = 1;
                var _columna = document.getElementById('miform').value;
                console.log(chequeDobleVerbo);
                if (_columna == columna) {
                    chequeDobleVerbo = 0;
                    console.log(chequeDobleVerbo);
                    document.getElementById('botonComprobar').classList.remove('btn-primary');
                    document.getElementById('botonComprobar').classList.add('btn-success');
                    document.getElementById('botonComprobar').innerText = "Ooh it's correct!!!";
                    marcador++;
                    //aqui si la respuesta es correcta cambio de color del icono 
                    document.getElementById(id).style.color = 'gold';
                    auxiliar = id;
                    marcadorGalletica=marcador;

                } else {

                    document.getElementById('botonComprobar').classList.add('btn-danger');
                    document.getElementById('botonComprobar').innerText = columna;
                    marcador = 0;
                    //aqui llamo la funcion que borra el color de todos los iconos
                    borraColorIconos();

                }

            } else {

                document.getElementById('botonComprobar').classList.remove('btn-success');
                document.getElementById('botonComprobar').classList.remove('btn-danger');
                document.getElementById('botonComprobar').classList.add('btn-primary');
                document.getElementById('botonComprobar').innerText = "Comprobar";
                jugando = 0;
                marcadorGalletica=marcador;

                eligeVerbo(nivel);
            }

            document.getElementById('marcador').innerText = marcador;


        }
        chequeaRespuesta(columna);
        function eligeVerbo() {
            var verboelegido = Math.floor(Math.random() * nivel);
            var tiempoRandom = Math.floor(Math.random() * 3);
            document.getElementById('spanishVerb').innerHTML = verbos[verboelegido][3];
            //alternativa para dobles verbos
            if (verbos[verboelegido][3] == 'ser' || verbos[verboelegido][3] == 'aprender') {
                console.log("entro en el if de elige verbo")
                //variable que me va a activar doble correccion
                chequeDobleVerbo = 1;
            }
            if (tiempoRandom == 0) {
                document.getElementById('primeraForma').innerHTML = '<input id="miform" class="form-control form-sl cajatexto" type="text" placeholder="Dame verbo" > ';
                columna = verbos[verboelegido][0];
            } else {
                document.getElementById('primeraForma').innerHTML =
                    '<button type="button" class="btn btn-block btn-primary" id="primeraForma">' + verbos[verboelegido][0] + '</button>';
            }
            if (tiempoRandom == 1) {
                document.getElementById('segundaForma').innerHTML = '<input id="miform" class="form-control form-sl cajatexto" type="text" placeholder="Dame verbo"> ';
                columna = verbos[verboelegido][1];
            } else {
                document.getElementById('segundaForma').innerHTML =
                    '<button type="button" class="btn btn-block btn-primary" id="segundaForma">' + verbos[verboelegido][1] + '</button>';
            }

            if (tiempoRandom == 2) {
                document.getElementById('terceraForma').innerHTML = '<input id="miform" class="form-control form-sl cajatexto" type="text" placeholder="Dame verbo"> ';
                columna = verbos[verboelegido][2];
            } else {
                document.getElementById('terceraForma').innerHTML =
                    '<button type="button" class="btn btn-block btn-primary" id="terceraForma">' + verbos[verboelegido][2] + '</button>';
            }


        }
        //aqui se almacenan las cookies
        function guardarGalletica(_nivelGalletica,marcadorGalletica){
            nombre=_nivelGalletica;
            valor=marcadorGalletica;
            fecha= "31 Diciembre 2020 23:59:59 GTM";
            document.cookie=nombre + "=" + valor + "expires = " + fecha;
        }
        //aquí se leen las cookies
        function leerGalletica (nivel){
            misGalletas = document.cookie;
            galletaRellena = misGalletas.split('=');
            for (i in galletaRellena){
                var arrayAuxiliar = galletaRellena[i].split('=');
                var nivelActual = arrayAuxiliar[0].substring(5);
                var marcadorActual = arrayAuxiliar[1];
                if(nivel==nivelActual){
                    marcador= marcadorActual;
                }
            }
        }
        guardarGalletica(_nivelGalletica,marcadorGalletica);
        function cambiaNivel() {
            location.reload();
        }
        function barraProgresso() {
            var element = document.getElementById('barraProgreso');
            progress = setInterval(function () {

                element.style.width = 100 * (marcador / nivel) + '%';

            }, 250);

        }
        barraProgresso();
    </script>
</body>

</html>
